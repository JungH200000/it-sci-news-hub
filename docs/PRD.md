# ğŸ“‘ Product Requirements Document (PRD)

## 1. ê°œìš”

**í”„ë¡œì íŠ¸ëª…**: IT/ê³¼í•™ ë‰´ìŠ¤ ëª¨ì•„ë³´ê¸° & ìš”ì•½ ì›¹ì•±  
**ê¸°ê°„**: 2ì£¼ (ê°œì¸ í”„ë¡œì íŠ¸, MVP ê°œë°œ)

- ì—¬ëŸ¬ ë§¤ì²´ì˜ ITÂ·ê³¼í•™Â·ê¸°ìˆ  ë‰´ìŠ¤ë¥¼ í•œ ê³³ì—ì„œ ë‚ ì§œë³„Â·ì£¼ì°¨ë³„ë¡œ ëª¨ì•„ í¸í–¥ ì—†ëŠ” ê°„ë‹¨í•œ ìš”ì•½ê³¼ ê²€ìƒ‰ ê¸°ëŠ¥ìœ¼ë¡œ ìµœì‹  ë™í–¥ì„ ë¹ ë¥´ê²Œ íŒŒì•…í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ë¥¼ êµ¬ì¶•í•œë‹¤.
- ì—¬ëŸ¬ ë‰´ìŠ¤ ë§¤ì²´ì˜ ê¸°ì‚¬ë“¤ì„ í•œ ê³³ì— ëª¨ì•„ì„œ ê³µí†µëœ ì£¼ì œë¼ë¦¬ ë¶„ë¥˜í•˜ê³  ì •ë¦¬/ìš”ì•½í•˜ì—¬ í¸í–¥ë˜ì§€ ì•Šì€ IT/ê³¼í•™/ê¸°ìˆ  ì •ë³´ë¥¼ ì „ë‹¬í•˜ëŠ” í”Œë«í¼

---

## 2. ë¬¸ì œ ì •ì˜

- ì—¬ëŸ¬ ë‰´ìŠ¤ ë§¤ì²´ì˜ ê¸°ì‚¬ë“¤ì„ í•œ ê³³ì— ëª¨ì•„ì„œ ì •ë¦¬ëœ ì •ë³´ë¥¼ ì „ë‹¬í•˜ëŠ” í”Œë«í¼ì˜ ë¶€ì¬
- ë„¤ì´ë²„ ë‰´ìŠ¤ ê²½ìš° í—¤ë“œë¼ì¸ ë‰´ìŠ¤ë¡œ ê³µí†µëœ ì£¼ì œì— ëŒ€í•œ ì—¬ëŸ¬ ë§¤ì²´ ê¸°ì‚¬ ì¤‘ í•˜ë‚˜ì˜ ê¸°ì‚¬ë§Œ ì¤‘ì ìœ¼ë¡œ ë³´ì—¬ì¤Œ
- IT/ê³¼í•™ ë¶„ì•¼ ê¸°ì‚¬ë¥¼ ì¤‘ë¦½ì ìœ¼ë¡œ íë ˆì´ì…˜í•´ ëª¨ì•„ ì£¼ëŠ” ì „ë¬¸ í”Œë«í¼ì´ ë¶€ì¡±í•˜ë‹¤.
- AI, ë³´ì•ˆ, ë°˜ë„ì²´ ë“± íŠ¹ì • ì£¼ì œÂ·í‚¤ì›Œë“œ ì¤‘ì‹¬ìœ¼ë¡œ ë‰´ìŠ¤ë¥¼ ì„ ë³„í•´ ë³´ê³  ì‹¶ì€ ìˆ˜ìš”ê°€ ì¶©ì¡±ë˜ì§€ ì•ŠëŠ”ë‹¤.

---

## 3. ëª©í‘œ ì‚¬ìš©ì

- ìµœì‹  IT/ê³¼í•™ ë‰´ìŠ¤ë¥¼ ë¹ ë¥´ê²Œ í›‘ì–´ë³´ë ¤ëŠ” ì¼ë°˜ ì‚¬ìš©ì
- ê¸°ìˆ  ë™í–¥ì„ ê¾¸ì¤€íˆ ì±™ê²¨ì•¼ í•˜ëŠ” í•™ìƒÂ·ì§ì¥ì¸
- íŠ¹ì • ê¸°ìˆ  í‚¤ì›Œë“œì— ê´€ì‹¬ì´ ìˆëŠ” ê°œë°œìÂ·ì—°êµ¬ì

---

## 4. í•µì‹¬ ê°€ì¹˜

- ë‚ ì§œë³„(Daily)Â·ì£¼ì°¨ë³„(Weekly)ë¡œ ì •ë¦¬ëœ ë‰´ìŠ¤ í”¼ë“œ
- ê¸°ì‚¬ ìš”ì•½(2~3ì¤„)ë¡œ ë¹ ë¥¸ ì´í•´
- í‚¤ì›Œë“œ ê²€ìƒ‰ê³¼ ì¹´í…Œê³ ë¦¬ í•„í„° ì œê³µ
- ì›ë¬¸ ë§í¬ë¥¼ í†µí•œ ì‹¬í™” íƒìƒ‰

---

## 5. MVP ë²”ìœ„

- **Daily IT/Science í”¼ë“œ**: ë„¤ì´ë²„ IT/ê³¼í•™ ë‰´ìŠ¤, DataNet RSS ì†ŒìŠ¤ë¥¼ ìë™ ìˆ˜ì§‘ (ZDNet Korea, ScienceDaily ì—°ë™ì€ í™•ì¥ ëŒ€ìƒ)
- **Weekly SciTech í”¼ë“œ**: scienceON ì£¼ê°„ ë‰´ìŠ¤ ìŠ¤í¬ë˜í•‘ ê²°ê³¼ ì œê³µ
- **ìë™ ìˆ˜ì§‘ ë°°ì¹˜**: Daily 1ì¼ 4íšŒ, Weekly ì£¼ 2íšŒ GitHub Actionsë¡œ êµ¬ë™
- **ê²€ìƒ‰**: PostgreSQL FTS(`tsvector`) + `pg_trgm` ì¸ë±ìŠ¤ ì¡°í•©
- **UI**: íƒ­ ê¸°ë°˜ ë ˆì´ì•„ì›ƒ, ë‚ ì§œ/ì£¼ì°¨ ì‚¬ì´ë“œë°”, ì¹´ë“œ ë·°, `Load More` ë²„íŠ¼, ë°˜ì‘í˜• ì§€ì›

---

## 6. í›„ìˆœìœ„ ë° ì œì™¸ ë²”ìœ„

- ê¸°ì‚¬ ë³¸ë¬¸ì„ ì„ë² ë”©(ë²¡í„°í™”)í•˜ì—¬ ì¤‘ë³µ ê¸°ì‚¬ë¥¼ ë¬¶ê³  LLM ê¸°ë°˜ ìš”ì•½ í’ˆì§ˆ ê³ ë„í™” (í˜„ì¬ëŠ” ê·œì¹™ ê¸°ë°˜ ì¶”ì¶œ ìš”ì•½)
- Supabase Auth ê¸°ë°˜ ë¡œê·¸ì¸ê³¼ ë¶ë§ˆí¬Â·ì¦ê²¨ì°¾ê¸°
- ì‚¬ìš©ìë³„ í‚¤ì›Œë“œ ì¶”ì²œ ë° ê°œì¸í™” í”¼ë“œ
- í•´ì™¸/ë¹„í•œê¸€ ì†ŒìŠ¤ í™•ëŒ€ ë° ë‹¤êµ­ì–´ ëŒ€ì‘

---

## 7. ì‚¬ìš©ì ê²½í—˜ (UX)

### 7.1 ìƒë‹¨/ê³µí†µ

- ì¢Œì¸¡ ë¡œê³ /ì„œë¹„ìŠ¤ëª…, ì¤‘ì•™ íƒ­(Daily / Weekly), ìš°ì¸¡ í‚¤ì›Œë“œ ê²€ìƒ‰ ì…ë ¥ í•„ë“œ
- ë°˜ì‘í˜•: ë°ìŠ¤í¬íƒ‘ì€ ì‚¬ì´ë“œë°” + 2~3ì—´ ì¹´ë“œ, ëª¨ë°”ì¼ì€ ì‚¬ì´ë“œë°” ì ‘í˜ + 1ì—´ ì¹´ë“œ

### 7.2 Daily íƒ­

- ì‚¬ì´ë“œë°”: ìµœê·¼ 14ì¼ ë‚ ì§œ (ìµœì‹  í•­ëª© `New` ë±ƒì§€)
- ê¸°ì‚¬ ì˜ì—­: ê¸°ë³¸ 10ê°œ ì¹´ë“œ, `Load More` í´ë¦­ ì‹œ 10ê°œì”© ì¶”ê°€ ë…¸ì¶œ

### 7.3 Weekly íƒ­

- ì‚¬ì´ë“œë°”: ìµœê·¼ 8ì£¼ ì£¼ì°¨ (ìµœì‹  í•­ëª© `New` ë±ƒì§€)
- ê¸°ì‚¬ ì˜ì—­: ê¸°ë³¸ 10ê°œ ì¹´ë“œ, `Load More`ë¡œ 10ê°œì”© ì¶”ê°€

### 7.4 ê²€ìƒ‰ ê²°ê³¼

- Daily(ìµœê·¼ 14ì¼) / Weekly ì„¹ì…˜ ë¶„ë¦¬ í‘œì‹œ
- ê° ì„¹ì…˜ ê¸°ë³¸ 10ê°œ ì¹´ë“œ, `Load More`ë¡œ ì¶”ê°€ ë¡œë”©

### 7.5 Load More UX

- ë²„íŠ¼ í´ë¦­ ì‹œ `disabled` ì²˜ë¦¬ + â€œLoadingâ€¦â€ + ìŠ¤í”¼ë„ˆ
- ì‘ë‹µì´ 10ê°œ ë¯¸ë§Œì´ë©´ ë²„íŠ¼ ëŒ€ì‹  â€œNo more resultsâ€ ì•ˆë‚´

### 7.6 ì ‘ê·¼ì„±

- íƒ­: WAI-ARIA íŒ¨í„´ ì§€ì› (Arrow/Home/End í‚¤ ì´ë™)
- ë²„íŠ¼: `aria-busy`, `aria-live="polite"` ì ìš©
- Load More ì´í›„ ì¶”ê°€ëœ ì²« ì¹´ë“œì— í¬ì»¤ìŠ¤ ì´ë™

### 7.7 ì—ëŸ¬Â·ë¹ˆ ìƒíƒœ UI

- ë¹ˆ ê²°ê³¼: â€œNo results foundâ€
- ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: â€œNetwork error. Retryâ€
- ì¸ë„¤ì¼ ì—†ìŒ: í”Œë ˆì´ìŠ¤í™€ë” ì´ë¯¸ì§€ + ë³¸ë¬¸ ì˜ì—­ í™•ì¥
- ìˆ˜ì§‘ ì‹¤íŒ¨: â€œì¼ì‹œì ìœ¼ë¡œ ë¡œë”©ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.â€

---

## 8. ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ (Acceptance Criteria)

- Daily ì‚¬ì´ë“œë°”ëŠ” ìµœê·¼ 14ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ë‚ ì§œë¥¼ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ë…¸ì¶œí•œë‹¤.
- ë‚ ì§œ ì„ íƒ ì‹œ ìµœì‹ ìˆœìœ¼ë¡œ 10ê°œì˜ ê¸°ì‚¬ë¥¼ ë³´ì—¬ì£¼ê³ , `Load More` í´ë¦­ ì‹œ 10ê°œì”© ì¶”ê°€ëœë‹¤.
- Weekly íƒ­ë„ ë™ì¼í•œ ë¡œì§ìœ¼ë¡œ ì£¼ì°¨ ëª©ë¡ê³¼ ê¸°ì‚¬ ëª©ë¡ì„ ë…¸ì¶œí•œë‹¤.
- ê²€ìƒ‰ì€ Daily(ìµœê·¼ 14ì¼)ì™€ Weeklyë¥¼ ë™ì‹œì— ìˆ˜í–‰í•˜ê³ , ê²°ê³¼ë¥¼ ê´€ë ¨ë„ â†’ ìµœì‹ ìˆœìœ¼ë¡œ ì •ë ¬í•´ ì„¹ì…˜ë³„ë¡œ í‘œì‹œí•œë‹¤.
- ì¹´ë“œì—ëŠ” ì œëª©Â·ìš”ì•½Â·ì¶œì²˜Â·ì¼ì‹œ(ë˜ëŠ” ì£¼ì°¨)Â·ì¹´í…Œê³ ë¦¬ë¥¼ í‘œì‹œí•˜ë©° ì œëª© í´ë¦­ ì‹œ ìƒˆ íƒ­ìœ¼ë¡œ ì›ë¬¸ì„ ì—°ë‹¤.

---

## 9. ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ (NFR)

- **ì„±ëŠ¥**: ëª©ë¡ API p95 < 500ms, ì´ˆê¸° ì¹´ë“œ ë Œë”ë§ FCP < 2.5s(ë°ìŠ¤í¬íƒ‘ ê¸°ì¤€)
- **ì ‘ê·¼ì„±**: í‚¤ë³´ë“œ ë‚´ë¹„ê²Œì´ì…˜ê³¼ ARIA ì†ì„± ì¤€ìˆ˜
- **ì•ˆì •ì„±**: ì†ŒìŠ¤ ì¼ë¶€ ì‹¤íŒ¨ ì‹œì—ë„ ë‚˜ë¨¸ì§€ ì„œë¹„ìŠ¤ ì§€ì†, ì‚¬ìš©ìì—ê²Œ í† ìŠ¤íŠ¸ ë“±ìœ¼ë¡œ ì•ˆë‚´
- **SEO/ê³µìœ **: ê¸°ë³¸ `<title>` ë° OG ë©”íƒ€ íƒœê·¸ (SSR ë¯¸ë„ì… ê°€ì •)
- **ë³´ì•ˆ**: Supabase í…Œì´ë¸”ì— RLS ì ìš©, API ë ˆì´íŠ¸ ë¦¬ë¯¸íŠ¸(ê¸°ë³¸ 120req/ë¶„)

---

## 10. ë°ì´í„° ë° ê²€ìƒ‰ ì„¤ê³„

### 10.1 ë°ì´í„° êµ¬ì¡°

**Daily Articles**

| í•„ë“œ         | íƒ€ì…          | ì„¤ëª…                                           |
| ------------ | ------------- | ---------------------------------------------- |
| id           | text (PK)     | `SHA1(link)` ë“±ì˜ ê³ ìœ  ID                      |
| date         | date          | YYYY-MM-DD (KST ë²„í‚·)                          |
| source       | text          | ì¶œì²˜ (ì˜ˆ: ë„¤ì´ë²„ IT/ê³¼í•™)                      |
| title        | text          | ì œëª©                                           |
| summary      | text          | 2~3ì¤„ ìš”ì•½ (null í—ˆìš©)                         |
| link         | text (unique) | ì›ë¬¸ ë§í¬                                      |
| published_at | timestamptz   | ì›ë¬¸ ë°œí–‰ ì‹œê° (UTC)                           |
| category     | text          | AI/ë³´ì•ˆ/ë°˜ë„ì²´/ë¡œë´‡/ìƒëª…ê³¼í•™/IT/ê³¼í•™/ê¸°ìˆ /ê¸°íƒ€ |
| thumbnail    | text          | ì¸ë„¤ì¼ URL (ì„ íƒ)                              |
| created_at   | timestamptz   | ì‚½ì… ì‹œê° (default now)                        |

**ê¶Œì¥ ì¸ë±ìŠ¤**

```sql
create index if not exists idx_daily_date on daily_articles(date);
create index if not exists idx_daily_category on daily_articles(category);
create unique index if not exists uniq_daily_link on daily_articles(link);
create index if not exists idx_daily_title_trgm on daily_articles using gin (title gin_trgm_ops);
create index if not exists idx_daily_summary_trgm on daily_articles using gin (summary gin_trgm_ops);
```

**Weekly Articles**

| í•„ë“œ         | íƒ€ì…        | ì„¤ëª…                           |
| ------------ | ----------- | ------------------------------ |
| id           | text (PK)   | `SHA1(source+week+title+link)` |
| week         | text        | YYYY-MM-N (ì˜ˆ: 2025-09-3)      |
| period_label | text        | UI í‘œì‹œìš© (â€œ2025ë…„ 9ì›” 3ì£¼ì°¨â€) |
| source       | text        | ì› ì¶œì²˜ (ì˜ˆ: ë™ì•„ì‚¬ì´ì–¸ìŠ¤)     |
| title        | text        | ì œëª©                           |
| summary      | text        | ìš”ì•½                           |
| link         | text        | ì›ë¬¸ ë§í¬                      |
| category     | text        | ê¸°ë³¸ `ê³¼í•™ê¸°ìˆ `                |
| thumbnail    | text        | ì¸ë„¤ì¼ URL (ì„ íƒ)              |
| created_at   | timestamptz | ì‚½ì… ì‹œê° (default now)        |

```sql
create index if not exists idx_weekly_week on weekly_articles(week);
create index if not exists idx_weekly_title_trgm on weekly_articles using gin (title gin_trgm_ops);
create index if not exists idx_weekly_summary_trgm on weekly_articles using gin (summary gin_trgm_ops);
```

- ë‘ í…Œì´ë¸” ëª¨ë‘ Row Level Security(RLS) í™œì„±í™” ë° ì½ê¸° ì •ì±… ì ìš© (006_security_hardening.sql).
- `unified_articles` ë·°ì™€ `search_unified` RPCëŠ” Daily/Weeklyë¥¼ í†µí•©í•´ ê²€ìƒ‰/í‘œì‹œí•œë‹¤ (008_unified_thumbnail.sql ê¸°ì¤€).

### 10.2 ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ ê·œì¹™

**ì†ŒìŠ¤ë³„ ê¸°ë³¸ê°’**

- ë„¤ì´ë²„ IT/ê³¼í•™ â†’ `IT/ê³¼í•™`
- DataNet â†’ `IT/ê³¼í•™`
- ZDNet Korea â†’ `IT/ê¸°ìˆ `
- ScienceDaily â†’ `ê³¼í•™`
- scienceON â†’ `ê³¼í•™ê¸°ìˆ `

**ì œëª© í‚¤ì›Œë“œ ë®ì–´ì“°ê¸°**

- `AI|ì¸ê³µì§€ëŠ¥|GPT|LLM|ë”¥ëŸ¬ë‹` â†’ `AI`
- `ë³´ì•ˆ|í•´í‚¹|ìœ ì¶œ|ì·¨ì•½|ëœì„¬` â†’ `ë³´ì•ˆ`
- `ë°˜ë„ì²´|ì¹©|íŒŒìš´ë“œë¦¬` â†’ `ë°˜ë„ì²´`
- `ë¡œë´‡|ë¡œë³´í‹±ìŠ¤` â†’ `ë¡œë´‡`
- `ìƒëª…|ì œì•½|ë°±ì‹ |ìœ ì „ì²´|ë¯¸ìƒë¬¼` â†’ `ìƒëª…ê³¼í•™`

ë¡œì§: ê¸°ë³¸ê°’ ì§€ì • í›„ ì œëª© í‚¤ì›Œë“œê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ë¡œ ë®ì–´ì“´ë‹¤.

### 10.3 ê²€ìƒ‰ ì„¤ê³„

- **ì—”ì§„**: PostgreSQL FTS (`tsvector` + `websearch_to_tsquery`)
- **ë³´ì™„**: `pg_trgm` ì¸ë±ìŠ¤ë¡œ êµ­ë¬¸ ë¶€ë¶„ ì¼ì¹˜/ìœ ì‚¬ë„ í–¥ìƒ
- **ë²”ìœ„**: Daily = ìµœê·¼ 14ì¼, Weekly = ì „ì²´
- **ì •ë ¬**: ê´€ë ¨ë„(`ts_rank`) â†’ ìµœì‹ (`sort_time`)
- **ë°˜í™˜**: Dailyì™€ Weekly ì„¹ì…˜ì„ ë¶„ë¦¬í•˜ê³  ê° ì„¹ì…˜ ìµœëŒ€ 50ê±´ ìƒí•œ ì ìš©

```sql
create or replace view public.unified_articles as
select
  'daily'::text as kind,
  date as date_key,
  null::text as week_key,
  published_at as sort_time,
  published_at,
  null::text as period_label,
  id,
  source,
  title,
  summary,
  link,
  category,
  tsv,
  thumbnail
from public.daily_articles
union all
select
  'weekly'::text as kind,
  null::date as date_key,
  week as week_key,
  coalesce(created_at, now()) as sort_time,
  null::timestamptz as published_at,
  period_label,
  id,
  source,
  title,
  summary,
  link,
  category,
  tsv,
  thumbnail
from public.weekly_articles;

create or replace function public.search_unified(
  q text,
  cat text default null,
  d_since interval default '14 days',
  max_results int default 50
) returns table (
  kind text,
  date_key date,
  week_key text,
  sort_time timestamptz,
  published_at timestamptz,
  period_label text,
  id text,
  source text,
  title text,
  summary text,
  link text,
  category text,
  thumbnail text,
  rank float
) language sql
  set search_path = public
as $$
  with params as (
    select
      coalesce(nullif(trim(q), ''), '')::text as raw_q,
      websearch_to_tsquery('simple', coalesce(nullif(trim(q), ''), '')) as tsq
  ),
  filtered as (
    select
      ua.kind,
      ua.date_key,
      ua.week_key,
      ua.sort_time,
      ua.published_at,
      ua.period_label,
      ua.id,
      ua.source,
      ua.title,
      ua.summary,
      ua.link,
      ua.category,
      ua.thumbnail,
      ts_rank(ua.tsv, params.tsq) as rank,
      row_number() over (
        partition by ua.kind
        order by ts_rank(ua.tsv, params.tsq) desc, ua.sort_time desc
      ) as rn
    from public.unified_articles ua
    cross join params
    where params.raw_q <> ''
      and ua.tsv @@ params.tsq
      and (ua.kind <> 'daily' or ua.date_key >= current_date - coalesce(d_since, '14 days'::interval))
      and (nullif(cat, '') is null or ua.category = cat)
  )
  select
    kind, date_key, week_key, sort_time, published_at, period_label,
    id, source, title, summary, link, category, thumbnail, rank
  from filtered
  where rn <= case when max_results is null or max_results < 1 then 50 else max_results end
  order by kind, rank desc, sort_time desc;
$$;
```

---

## 11. ë°ì´í„° ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸

### 11.1 ì†ŒìŠ¤

**Daily (ìŠ¤í¬ë˜í•‘/RSS)**

- ë„¤ì´ë²„ IT/ê³¼í•™: `https://news.naver.com/section/105`
- DataNet: `https://www.datanet.co.kr/rss/allArticle.xml`
- ZDNet Korea: `https://feeds.feedburner.com/zdkorea` (í™•ì¥ ì˜ˆì •)
- ScienceDaily: `https://www.sciencedaily.com/rss/top/science.xml` (í™•ì¥ ì˜ˆì •)

**Weekly (ìŠ¤í¬ë˜í•‘)**

- scienceON: `https://scienceon.kisti.re.kr/trendPromo/PORTrendPromoList.do`

### 11.2 ìˆ˜ì§‘ ë°©ì‹

- Python ìŠ¤í¬ë¦½íŠ¸(`services/ingest/*.py`)ê°€ RSS/DOM íŒŒì‹± â†’ ë°ì´í„° ì •ê·œí™” â†’ Supabase REST APIë¡œ UPSERT
- Daily: `naver_tech_scraper.py`, `datanet_scraper.py` â†’ `run_ingest.py daily`
- Weekly: `science_on_scraper.py` â†’ `run_ingest.py weekly`
- ìš”ì•½: ê·œì¹™ ê¸°ë°˜ ì¶”ì¶œ ìš”ì•½ (2~3ë¬¸ì¥, ìµœëŒ€ 180ì, ì‹¤íŒ¨ ì‹œ `summary = null`)
- ì¹´í…Œê³ ë¦¬: ì†ŒìŠ¤ ê¸°ë³¸ê°’ â†’ ì œëª© í‚¤ì›Œë“œ ë®ì–´ì“°ê¸° ë¡œì§ ì¤€ìˆ˜

### 11.3 ìŠ¤ì¼€ì¤„ë§ & ìë™í™”

- GitHub Actions ì›Œí¬í”Œë¡œ `.github/workflows/ingest-daily.yml`
  - UTC 21:00 / 03:00 / 09:00 / 15:00 â†’ KST 06:00 / 12:00 / 18:00 / 24:00 ë§¤ì¼ ì‹¤í–‰ (ì¬ì‹œë„ ì—¬ìœ  í™•ë³´)
- `.github/workflows/ingest-weekly.yml`
  - UTC 03:00 ì›”Â·ëª© â†’ KST 12:00 ì›”ìš”ì¼Â·ëª©ìš”ì¼ ì‹¤í–‰ (ë°œí–‰ ì§€ì—° ëŒ€ì‘)
- ê³µí†µ í™˜ê²½ ë³€ìˆ˜: `SUPABASE_URL`, `SUPABASE_SERVICE_KEY`, `TZ=Asia/Seoul`
- ë¡œì»¬ ì‹¤í–‰ ì˜ˆì‹œ: `python services/ingest/run_ingest.py daily --limit 50`

### 11.4 ë°ì´í„° í’ˆì§ˆ & ì˜ˆì™¸ ì²˜ë¦¬

- ì¤‘ë³µ ì œê±°: `id` ë° `link` ê¸°ë°˜ UPSERT (`resolution=merge-duplicates`)
- íƒ€ì„ì¡´: `date`ëŠ” KST ë²„í‚·, `published_at`ì€ UTC ê¸°ì¤€ ì €ì¥
- ë³¸ë¬¸ 150ì ë¯¸ë§Œ ê¸°ì‚¬ ì œì™¸, ìš”ì•½ ì—†ìŒ ì‹œ UI ë°°ì§€ë¡œ ì•ˆë‚´

---

## 12. ë°°í¬Â·í™˜ê²½ ë³€ìˆ˜ & ìë™í™” ìŠ¤í¬ë¦½íŠ¸

```
apps/web/.env.local
  NEXT_PUBLIC_API_BASE_URL=

services/api/.env
  DATABASE_URL=
  SUPABASE_URL=
  SUPABASE_SERVICE_KEY=
  TZ=Asia/Seoul
  ALLOWED_ORIGINS=

services/ingest/.env
  SUPABASE_URL=
  SUPABASE_SERVICE_KEY=
  TZ=Asia/Seoul
```

```
package.json (root)
  "scripts": {
    "dev:web": "npm --workspace apps/web run dev",
    "dev:api": "npm --workspace services/api run dev",
    "lint": "eslint . --ext .js,.jsx,.ts,.tsx",
    "format": "prettier -w ."
  }
```

- í”„ëŸ°íŠ¸ì—”ë“œ ê°œë°œ ì„œë²„: `npm run dev:web` (Next.js 3000)
- API ì„œë²„: `npm run dev:api` (Express 4000, ê¸°ë³¸ ë² ì´ìŠ¤ URL `http://localhost:4000/api`)
- Python ì˜ì¡´ì„±: `pip install -r requirement.txt`

---

## 13. ë°ì´í„° ë³´ì¡´ ì •ì±… (ì˜µì…˜)

```sql
-- Daily: 30ì¼ ì´ì „ ì‚­ì œ
delete from daily_articles
where date < current_date - interval '30 days';

-- Weekly: 26ì£¼ ì´ì „ ì‚­ì œ (created_at ê¸°ì¤€)
delete from weekly_articles
where created_at < now() - interval '26 weeks';
```

---

## 14. ë¡œê¹…/ë¶„ì„ (ì„ íƒ)

- ì´ë²¤íŠ¸: `select_date`, `select_week`, `search_submit`, `load_more`, `open_link`
- ì†ì„±: ê²€ìƒ‰ì–´, ì¹´í…Œê³ ë¦¬, ë‚ ì§œ/ì£¼ì°¨, í˜ì´ì§€, ê²°ê³¼ ìˆ˜
- í™œìš©: í˜ì´ì§€ ì‚¬ì´ì¦ˆ/ì •ë ¬/ì‚¬ì´ë“œë°” UX íŠœë‹ ê·¼ê±° í™•ë³´

---

## 15. ë¦¬ìŠ¤í¬ & ëŒ€ì‘

- RSS/DOM êµ¬ì¡° ë³€ê²½ â†’ ì–´ëŒ‘í„° ëª¨ë“ˆí™”, ì‹¤íŒ¨ ì‹œ ì†ŒìŠ¤ë³„ ê²©ë¦¬ ë¡œê·¸
- ê³¼ë„í•œ í˜¸ì¶œ/ë¹„ìš© â†’ GitHub Actions ìŠ¤ì¼€ì¤„ ìµœì†Œí™” + API `limit` ê°•ì œ
- ì €ì‘ê¶Œ/ì´ìš©ì•½ê´€ â†’ ì›ë¬¸ ë§í¬Â·ì¶œì²˜ ëª…ì‹œ, ê° ì‚¬ì´íŠ¸ `robots.txt` ì¤€ìˆ˜
- ì´ë¯¸ì§€/í…ìŠ¤íŠ¸ ì¬ì‚¬ìš© ì´ìŠˆ â†’ MVP ë‹¨ê³„ëŠ” ì¸ë„¤ì¼ ì„ íƒì  ì‚¬ìš©, ìƒì—…í™” ì‹œ ë¼ì´ì„ ìŠ¤ ê³„ì•½ ë˜ëŠ” ëŒ€ì²´ ì´ë¯¸ì§€ ì „ëµ ìˆ˜ë¦½
- GitHub Actions ìŠ¤ì¼€ì¤„ì€ best-effort â†’ ë‹¤ì¤‘ ìŠ¤ì¼€ì¤„ë¡œ ì¬ì‹œë„ ì—¬ìœ  í™•ë³´

---

## 16. ì‹¤í–‰ ë¡œë“œë§µ (2ì£¼)

- **W1**
  - í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¸íŒ… (ë¦¬í¬ êµ¬ì¡°, ë¸Œëœì¹˜ ì „ëµ, ESLint/Prettier)
  - Mock ë°ì´í„° ê¸°ë°˜ UI ë¼ˆëŒ€ êµ¬í˜„ (ë ˆì´ì•„ì›ƒ, íƒ­, ì‚¬ì´ë“œë°”, ì¹´ë“œ, ë¹ˆ/ë¡œë”©/ì—ëŸ¬ ìƒíƒœ)
  - ì ‘ê·¼ì„± íŒ¨í„´ ê²€ì¦ ë° ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±

- **W2**
  - Supabase DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ (001~008 ìˆœì°¨ ì ìš©)
  - Daily/Weekly ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸ êµ¬ì¶• ë° ìƒ˜í”Œ ì ì¬ (`run_ingest.py` + GitHub Actions)
  - API â†” DB ì—°ë™, í”„ëŸ°íŠ¸ì—”ë“œì™€ ì‹¤ì œ ë°ì´í„° í†µí•©, ê²€ìƒ‰ RPC ì—°ê²°
  - ë°°í¬ ë° í™˜ê²½ ë³€ìˆ˜ êµ¬ì„±, ëª¨ë‹ˆí„°ë§/ë¡œê·¸ í™•ì¸ íë¦„ ì •ë¦¬, READMEÂ·ìš´ì˜ ê°€ì´ë“œ ì—…ë°ì´íŠ¸

---

## 17. Tech Stack & Hosting

- **Frontend**: Next.js (React) â€“ Vercel ë°°í¬ ì˜ˆì •, ì ‘ê·¼ì„± ì¤‘ì‹¬ ì»´í¬ë„ŒíŠ¸ êµ¬ì„±
- **Backend API**: Node.js + Express (Railway ë“±) â€“ Controller â†’ Service â†’ Repository ê³„ì¸µ, OpenAPI(`docs/openapi.yaml`) ê¸°ë°˜ ë¬¸ì„œ, `helmet`/`cors`/`compression`/`express-rate-limit`/`pino-http`
- **Database**: Supabase(PostgreSQL) â€“ SQL ë§ˆì´ê·¸ë ˆì´ì…˜ìœ¼ë¡œ ìŠ¤í‚¤ë§ˆ/ë·°/RPC ê´€ë¦¬
- **Batch/Ingest**: Python ìŠ¤í¬ë¦½íŠ¸ + GitHub Actions ìŠ¤ì¼€ì¤„ëŸ¬
- **ì–¸ì–´**: JavaScript(Next.js, Express), Python(ìˆ˜ì§‘) â€“ ì°¨í›„ TypeScript í™•ì¥ ê³ ë ¤

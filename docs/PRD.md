# ğŸ“‘ Product Requirements Document (PRD)

<!-- PRD-1 -->

## 1. ê°œìš”

**í”„ë¡œì íŠ¸ëª…**: IT/ê³¼í•™ ë‰´ìŠ¤ ëª¨ì•„ë³´ê¸° & ìš”ì•½ ì›¹ì•±
**ê¸°ê°„**: 2ì£¼ (ê°œì¸ í”„ë¡œì íŠ¸, MVP ê°œë°œ)

ì—¬ëŸ¬ ë§¤ì²´ì˜ IT/ê³¼í•™/ê¸°ìˆ  ë‰´ìŠ¤ë¥¼ í•œ ê³³ì— ëª¨ì•„ ë‚ ì§œë³„Â·ì£¼ì°¨ë³„ë¡œ ì œê³µí•˜ê³ ,
ì§§ì€ ìš”ì•½ê³¼ ê²€ìƒ‰ìœ¼ë¡œ ì‚¬ìš©ìê°€ ìµœì‹  ë™í–¥ì„ **ë¹ ë¥´ê²Œ** íŒŒì•…í•  ìˆ˜ ìˆê²Œ í•œë‹¤.

---

<!-- PRD-2 -->

## 2. ë¬¸ì œ ì •ì˜

<!-- PRD-2-1 -->

- ì—¬ëŸ¬ ë§¤ì²´ë¥¼ ì¼ì¼ì´ ëŒë©° ë‰´ìŠ¤ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì€ ë²ˆê±°ë¡­ë‹¤.

<!-- PRD-2-2 -->

- ìµœì‹  ë™í–¥ì„ ë¹ ë¥´ê²Œ í™•ì¸í•˜ë ¤ í•´ë„ ê´‘ê³ Â·ì¤‘ë³µ ê¸°ì‚¬ë¡œ ë¹„íš¨ìœ¨ì ì´ë‹¤.

<!-- PRD-2-3 -->

- íŠ¹ì • ì£¼ì œ(ì˜ˆ: AI, ë³´ì•ˆ, ë°˜ë„ì²´)ì— ëŒ€í•œ ê¸°ì‚¬ë§Œ ëª¨ì•„ë³´ê³  ì‹¶ë‹¤.

---

<!-- PRD-3 -->

## 3. ëª©í‘œ ì‚¬ìš©ì

<!-- PRD-3-1 -->

- ìµœì‹  IT/ê³¼í•™ ë‰´ìŠ¤ë¥¼ ë¹ ë¥´ê²Œ í™•ì¸í•˜ë ¤ëŠ” ì¼ë°˜ì¸

<!-- PRD-3-2 -->

- ë™í–¥ì„ ê¾¸ì¤€íˆ ì±™ê²¨ì•¼ í•˜ëŠ” í•™ìƒÂ·ì§ì¥ì¸

<!-- PRD-3-3 -->

- íŠ¹ì • ê¸°ìˆ  í‚¤ì›Œë“œì— ê´€ì‹¬ ìˆëŠ” ê°œë°œìÂ·ì—°êµ¬ì

---

<!-- PRD-4 -->

## 4. í•µì‹¬ ê°€ì¹˜

<!-- PRD-4-1 -->

- ë‚ ì§œë³„(Daily) / ì£¼ì°¨ë³„(Weekly)ë¡œ ì •ë¦¬ëœ ë‰´ìŠ¤ í”¼ë“œ

<!-- PRD-4-2 -->

- ê¸°ì‚¬ ìš”ì•½(2\~3ì¤„)ë¡œ ë¹ ë¥¸ ì´í•´

<!-- PRD-4-3 -->

- í‚¤ì›Œë“œ ê²€ìƒ‰ê³¼ ì¹´í…Œê³ ë¦¬ í•„í„°

<!-- PRD-4-4 -->

- ì›ë¬¸ ë§í¬ë¡œ ì‹¬í™” íƒìƒ‰

---

<!-- PRD-5 -->

## 5. MVP ë²”ìœ„

<!-- PRD-5-1 -->

- **Daily IT/Science**: RSS (í•œêµ­ê²½ì œ IT, DataNet, ZDNet Korea, ScienceDaily)
  â€» ì´ˆê¸° ê°œë°œì€ í•œêµ­ê²½ì œ RSSë¡œ ì‹œì‘í–ˆìœ¼ë©° í˜„ì¬ DataNetê¹Œì§€ ìë™í™” ì™„ë£Œ â†’ ì´í›„ ì†ŒìŠ¤ í™•ì¥

<!-- PRD-5-2 -->

- **Weekly SciTech**: scienceON ì£¼ê°„ ë‰´ìŠ¤ ìŠ¤í¬ë˜í•‘

<!-- PRD-5-3 -->

- **ìë™ ìˆ˜ì§‘**: Daily(ë§¤ì¼ 06:00 KST), Weekly(ë§¤ì£¼ ì›” 08:00 KST)

<!-- PRD-5-4 -->

- **ê²€ìƒ‰**: PostgreSQL FTS(tsvector) + `pg_trgm` ë³´ì™„

<!-- PRD-5-5 -->

- **UI**: íƒ­ ì „í™˜, ì‚¬ì´ë“œë°”, ì¹´ë“œ ë·°, **Load More ë²„íŠ¼**

<!-- PRD-5-6 -->

- **ê°œì¸í™”(ë¡œê·¸ì¸/ë¶ë§ˆí¬)**: ì œì™¸(ì°¨í›„ í™•ì¥)

---

<!-- PRD-6 -->

## 6. ë°ì´í„° êµ¬ì¡°

### Daily Articles

<!-- PRD-6.1-1 -->

| í•„ë“œ         | íƒ€ì…          | ì„¤ëª…                                           |
| ------------ | ------------- | ---------------------------------------------- |
| id           | text (PK)     | `SHA1(link)` ë“± ê³ ìœ  ID                        |
| date         | date          | YYYY-MM-DD (KST ë²„í‚·)                          |
| source       | text          | ì¶œì²˜ (ì˜ˆ: í•œêµ­ê²½ì œ IT)                         |
| title        | text          | ì œëª©                                           |
| summary      | text          | 2\~3ì¤„ ìš”ì•½                                    |
| link         | text (unique) | ì›ë¬¸ ë§í¬                                      |
| published_at | timestamptz   | ì›ë¬¸ ë°œí–‰ ì‹œê°(UTC ISO)                        |
| category     | text          | AI/ë³´ì•ˆ/ë°˜ë„ì²´/ë¡œë´‡/ìƒëª…ê³¼í•™/IT/ê³¼í•™/ê¸°ìˆ /ê¸°íƒ€ |
| thumbnail    | text          | ì¸ë„¤ì¼ URL(ì„ íƒ)                               |
| created_at   | timestamptz   | ì‚½ì… ì‹œê°(default now)                         |

**ê¶Œì¥ ì¸ë±ìŠ¤**

<!-- PRD-6.1-2 -->

```sql
create index if not exists idx_daily_date on daily_articles(date);
create index if not exists idx_daily_category on daily_articles(category);
create unique index if not exists uniq_daily_link on daily_articles(link);
```

### Weekly Articles

<!-- PRD-6.2-1 -->

| í•„ë“œ         | íƒ€ì…        | ì„¤ëª…                           |
| ------------ | ----------- | ------------------------------ |
| id           | text (PK)   | `SHA1(source+week+title+link)` |
| week         | text        | YYYY-MM-N (ì˜ˆ: 2025-09-3)      |
| period_label | text        | UI í‘œì‹œìš© (â€œ2025ë…„ 9ì›” 3ì£¼ì°¨â€) |
| source       | text        | ì› ì¶œì²˜ (ì˜ˆ: ë™ì•„ì‚¬ì´ì–¸ìŠ¤)     |
| title        | text        | ì œëª©                           |
| summary      | text        | ìš”ì•½                           |
| link         | text        | ì›ë¬¸ ë§í¬                      |
| category     | text        | ê¸°ë³¸ `ê³¼í•™ê¸°ìˆ `                |
| thumbnail    | text        | ì¸ë„¤ì¼ URL(ì„ íƒ)               |
| created_at   | timestamptz | ì‚½ì… ì‹œê°(default now)         |

**ê¶Œì¥ ì¸ë±ìŠ¤**

<!-- PRD-6.2-2 -->

```sql
create index if not exists idx_weekly_week on weekly_articles(week);
```

> ### DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì •ì±…
>
> **ìˆœì„œ ê³ ì •**:
>
> 1. `001_tables` (daily/weekly í…Œì´ë¸”)
> 2. `002_indexes` (ëª©ë¡/ì •ë ¬/ì¤‘ë³µ unique/ë³´ì¡° ì¸ë±ìŠ¤)
> 3. `003_tsv_triggers` (tsvector ì»¬ëŸ¼Â·íŠ¸ë¦¬ê±°, `pg_trgm` í¬í•¨)
> 4. `004_views` (`unified_articles` ë·°)
> 5. `005_search_rpc` (ê²€ìƒ‰ RPC, _ì„¹ì…˜ë³„ ìƒí•œ_ ê°•ì œ ë²„ì „)
>    (ì„ íƒ) 6) `006_policies`(ê¶Œí•œ/RLS) â†’ MVPëŠ” ì½ê¸° ì „ìš©ì´ë©´ ìƒëµ ê°€ëŠ¥
>    (ì„ íƒ) 7) `007_retention_jobs`(ë³´ì¡´ ì •ì±… SQL)
>
> **ë¶ˆë³€ ì›ì¹™**: ìœ„ ë²ˆí˜¸ëŠ” **ì¦ë¶„ ì ìš©**ì„ ì „ì œë¡œ í•˜ë©°, ìƒìœ„ ë²ˆí˜¸ê°€ í•˜ìœ„ ë²ˆí˜¸ë¥¼ ì°¸ì¡°í•˜ì§€ ì•Šë„ë¡ ì„¤ê³„í•œë‹¤.

---

<!-- PRD-7 -->

## 7. ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ ê·œì¹™

### ì†ŒìŠ¤ë³„ ê¸°ë³¸ê°’

<!-- PRD-7.1-1 -->

- í•œêµ­ê²½ì œ IT â†’ `IT/ê³¼í•™`

<!-- PRD-7.1-1a -->

- DataNet â†’ `IT/ê³¼í•™`

<!-- PRD-7.1-2 -->

- ZDNet Korea â†’ `IT/ê¸°ìˆ `

<!-- PRD-7.1-3 -->

- ScienceDaily â†’ `ê³¼í•™`

<!-- PRD-7.1-4 -->

- scienceON â†’ `ê³¼í•™ê¸°ìˆ `

### ì œëª© í‚¤ì›Œë“œ ë®ì–´ì“°ê¸°

<!-- PRD-7.2-1 -->

- `AI|ì¸ê³µì§€ëŠ¥|GPT|LLM|ë”¥ëŸ¬ë‹` â†’ `AI`

<!-- PRD-7.2-2 -->

- `ë³´ì•ˆ|í•´í‚¹|ìœ ì¶œ|ì·¨ì•½|ëœì„¬` â†’ `ë³´ì•ˆ`

<!-- PRD-7.2-3 -->

- `ë°˜ë„ì²´|ì¹©|íŒŒìš´ë“œë¦¬` â†’ `ë°˜ë„ì²´`

<!-- PRD-7.2-4 -->

- `ë¡œë´‡|ë¡œë³´í‹±ìŠ¤` â†’ `ë¡œë´‡`

<!-- PRD-7.2-5 -->

- `ìƒëª…|ì œì•½|ë°±ì‹ |ìœ ì „ì²´|ë¯¸ìƒë¬¼` â†’ `ìƒëª…ê³¼í•™`

> <!-- PRD-7-3 --> ë¡œì§: **ê¸°ë³¸ê°’ ì§€ì •** â†’ **ì œëª© í‚¤ì›Œë“œê°€ ìˆìœ¼ë©´ ë®ì–´ì“°ê¸°**.

---

<!-- PRD-8 -->

## 8. ê²€ìƒ‰ (Search)

<!-- PRD-8-1 -->

- **ì—”ì§„**: PostgreSQL FTS (`tsvector` + `websearch_to_tsquery`)

<!-- PRD-8-2 -->

- **ë³´ì™„**: `pg_trgm` ì¸ë±ìŠ¤ë¡œ êµ­ë¬¸ ë¶€ë¶„ ì¼ì¹˜/ìœ ì‚¬ë„

<!-- PRD-8-3 -->

- **ë²”ìœ„**: Daily = ìµœê·¼ 14ì¼ / Weekly = ì „ì²´

<!-- PRD-8-4 -->

- **ì •ë ¬**: **ê´€ë ¨ë„(ts_rank) â†’ ìµœì‹ (sort_time)**

<!-- PRD-8-5 -->

- **í‘œì‹œ**: Daily ì„¹ì…˜, Weekly ì„¹ì…˜ìœ¼ë¡œ ë¶„ë¦¬

<!-- PRD-8-6 -->

- **ê°œìˆ˜ ì œí•œ(ê¸°ë³¸)**: ì„¹ì…˜ë³„ ìµœëŒ€ 50ê±´

FTS ì»¬ëŸ¼/ì¸ë±ìŠ¤/íŠ¸ë¦¬ê±°(ìš”ì•½)

<!-- PRD-8-FTS-1 -->

```sql
-- Daily
alter table daily_articles add column if not exists tsv tsvector;
update daily_articles
set tsv = to_tsvector('simple', coalesce(title,'')||' '||coalesce(summary,'')||' '||coalesce(category,''));
create index if not exists idx_daily_tsv on daily_articles using gin(tsv);
create or replace function trg_daily_tsv_fn() returns trigger as $$
begin
  new.tsv := to_tsvector('simple', coalesce(new.title,'')||' '||coalesce(new.summary,'')||' '||coalesce(new.category,''));
  return new;
end $$ language plpgsql;
drop trigger if exists trg_daily_tsv on daily_articles;
create trigger trg_daily_tsv before insert or update on daily_articles
for each row execute function trg_daily_tsv_fn();

-- Weekly
alter table weekly_articles add column if not exists tsv tsvector;
update weekly_articles
set tsv = to_tsvector('simple', coalesce(title,'')||' '||coalesce(summary,'')||' '||coalesce(category,'')||' '||coalesce(period_label,''));
create index if not exists idx_weekly_tsv on weekly_articles using gin(tsv);
create or replace function trg_weekly_tsv_fn() returns trigger as $$
begin
  new.tsv := to_tsvector('simple', coalesce(new.title,'')||' '||coalesce(new.summary,'')||' '||coalesce(new.category,'')||' '||coalesce(new.period_label,''));
  return new;
end $$ language plpgsql;
drop trigger if exists trg_weekly_tsv on weekly_articles;
create trigger trg_weekly_tsv before insert or update on weekly_articles
for each row execute function trg_weekly_tsv_fn();

-- êµ­ë¬¸ ë³´ì™„
create extension if not exists pg_trgm;
create index if not exists idx_daily_title_trgm   on daily_articles using gin (title gin_trgm_ops);
create index if not exists idx_daily_summary_trgm on daily_articles using gin (summary gin_trgm_ops);
create index if not exists idx_weekly_title_trgm   on weekly_articles using gin (title gin_trgm_ops);
create index if not exists idx_weekly_summary_trgm on weekly_articles using gin (summary gin_trgm_ops);
```

---

<!-- PRD-9 -->

## 9. UI/í™”ë©´ ì„¤ê³„

### ìƒë‹¨/ê³µí†µ

<!-- PRD-9.1-1 -->

- ë¡œê³ /ì„œë¹„ìŠ¤ëª…(ì¢Œ), íƒ­(ì¤‘): **Daily IT/Science / Weekly SciTech**, ê²€ìƒ‰ì°½, Sign In/Up(ìš°)

<!-- PRD-9.1-2 -->

- ë°˜ì‘í˜•: ë°ìŠ¤í¬íƒ‘(ì‚¬ì´ë“œë°”+2\~3ì—´ ì¹´ë“œ) / ëª¨ë°”ì¼(ì‚¬ì´ë“œë°” ì ‘í˜+1ì—´)

### Daily íƒ­

<!-- PRD-9.2-1 -->

- **ì‚¬ì´ë“œë°”**: ìµœê·¼ 14ì¼ ë‚ ì§œ(ì˜¤ëŠ˜ `New`)

<!-- PRD-9.2-2 -->

- **ê¸°ì‚¬ ì˜ì—­**: ì¹´ë“œ **10ê°œ** ê¸°ë³¸ â†’ **Load More**(10ê°œì”© ì¶”ê°€)
  - ì¹´ë“œ: ì œëª©(ì›ë¬¸ ë§í¬), ìš”ì•½, ì¶œì²˜, ë°œí–‰ì¼, ì¹´í…Œê³ ë¦¬, (ì¸ë„¤ì¼)
  - **ì¶”í›„ ë°ì´í„°ê°€ ë§ì´ ìŒ“ì´ë©´** ë‚ ì§œ/ì£¼ì°¨ ëª©ë¡ë„ `ë”ë³´ê¸°` ë²„íŠ¼ìœ¼ë¡œ ì¶”ê°€ ë¶„ëŸ‰ì„ ë¡œë“œí•˜ëŠ” ë°©ì‹(ì ‘í˜/ë¬´í•œ ìŠ¤í¬ë¡¤) ê²€í† 

### Weekly íƒ­

<!-- PRD-9.3-1 -->

- **ì‚¬ì´ë“œë°”**: ìµœê·¼ 8ì£¼ ì£¼ì°¨(ìµœì‹  `New`)

<!-- PRD-9.3-2 -->

- **ê¸°ì‚¬ ì˜ì—­**: ì¹´ë“œ 10ê°œ ê¸°ë³¸ â†’ Load More(ë™ì¼ ê·œì¹™)

### ê²€ìƒ‰ ê²°ê³¼

<!-- PRD-9.4-1 -->

- **Daily Results (14ì¼)** / **Weekly Results** ì„¹ì…˜ ë¶„ë¦¬

<!-- PRD-9.4-2 -->

- ê° ì„¹ì…˜ 10ê°œ ê¸°ë³¸ â†’ Load More

### Load More UX (í™•ì •)

<!-- PRD-9.5-1 -->

- ë²„íŠ¼ ìœ ì§€, í´ë¦­ ì‹œ **disabled + â€œLoadingâ€¦â€ + ìŠ¤í”¼ë„ˆ**

<!-- PRD-9.5-2 -->

- ì™„ë£Œ í›„ ì •ìƒ ë³µê·€, 10ê°œ ë¯¸ë§Œ ì‘ë‹µì´ë©´ ë²„íŠ¼ ëŒ€ì‹  â€œNo more resultsâ€

**ì ‘ê·¼ì„±**

<!-- PRD-9.6-1 -->

- íƒ­: WAI-ARIA(Arrow/Home/End)

<!-- PRD-9.6-2 -->

- ë²„íŠ¼: `aria-busy` / `aria-live="polite"`

<!-- PRD-9.6-3 -->

- ë¡œë”© í›„ ì¶”ê°€ëœ ì²« ì¹´ë“œì— í¬ì»¤ìŠ¤ ì´ë™(í‚¤ë³´ë“œ ì‚¬ìš©ì ë°°ë ¤)

---

<!-- PRD-10 -->

## 10. ë°ì´í„° ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸

### 1) ì†ŒìŠ¤

**Daily (RSS)**

<!-- PRD-10.1-1 -->

- í•œêµ­ê²½ì œ IT: `https://www.hankyung.com/feed/it`

<!-- PRD-10.1-1a -->

- DataNet: `https://www.datanet.co.kr/rss/allArticle.xml`

<!-- PRD-10.1-2 -->

- ZDNet Korea: `https://feeds.feedburner.com/zdkorea`

<!-- PRD-10.1-3 -->

- ScienceDaily: `https://www.sciencedaily.com/rss/top/science.xml`
  â€» ì´ˆê¸° UI ê°œë°œì€ â€œí•œêµ­ê²½ì œ ë‹¨ì¼ ì†ŒìŠ¤â€ì—ì„œ ì‹œì‘ â†’ í˜„ì¬ DataNetê¹Œì§€ ìë™ ìˆ˜ì§‘, ì´í›„ ZDNet/ScienceDaily í™•ì¥ ì˜ˆì •

**Weekly (ìŠ¤í¬ë˜í•‘)**

<!-- PRD-10.1-4 -->

- scienceON: `https://scienceon.kisti.re.kr/trendPromo/PORTrendPromoList.do`

### 2) ìˆ˜ì§‘ ë°©ì‹

- **Daily**: `rss-parser` â†’ ì •ê·œí™” â†’ Supabase `daily_articles` UPSERT (í•œêµ­ê²½ì œ IT + DataNet ìë™í™”, ZDNet/ScienceDaily í™•ì¥ ì˜ˆì •)

<!-- PRD-10.2-1 -->

- `date`: **KST ë²„í‚·**(YYYY-MM-DD)

<!-- PRD-10.2-2 -->

- `published_at`: ISO(UTC)

<!-- PRD-10.2-3 -->

- `id`: `SHA1(link)` (fallback ì¡´ì¬)

<!-- PRD-10.2-4 -->

- `summary`: ë³¸ë¬¸/ìŠ¤ë‹ˆí«ì—ì„œ 2\~3ë¬¸ì¥(â‰ˆ180ì)(ì¶”í›„ ê°œì„  ollama LLM ëª¨ë¸ ì´ìš©í•˜ì—¬ ìš”ì•½)

<!-- PRD-10.2-5 -->

- `category`: ì†ŒìŠ¤ ê¸°ë³¸ê°’ â†’ ì œëª© í‚¤ì›Œë“œ ë®ì–´ì“°ê¸°

**Weekly**: `axios + cheerio` â†’ ì¶”ì¶œ â†’ `weekly_articles` UPSERT (ì›ë¬¸ ì¶œì²˜Â·ì¸ë„¤ì¼ ìœ ì§€)

- `services/ingest/run_ingest.py` ìŠ¤í¬ë¦½íŠ¸ê°€ Daily(í•œêµ­ê²½ì œ IT + DataNet), Weekly(scienceON) ê²°ê³¼ë¥¼ Supabase RESTë¡œ upsert
- GitHub Actions ì›Œí¬í”Œë¡œ(`ingest-daily.yml`, `ingest-weekly.yml`)ì—ì„œ `SUPABASE_URL`, `SUPABASE_SERVICE_KEY` secretì„ í™˜ê²½ ë³€ìˆ˜ë¡œ ì£¼ì…í•´ ìë™ ì‹¤í–‰

<!-- PRD-10.2-6 -->

- `week`: `YYYY-MM-N`, `period_label`: í‘œì‹œìš©

<!-- PRD-10.2-7 -->

- `id`: `SHA1(source+week+title+link)`

### 3) ìŠ¤ì¼€ì¤„ë§

<!-- PRD-10.3-1 -->

- Daily: ë§¤ì¼ **06:00 KST**

<!-- PRD-10.3-2 -->

- Weekly: ë§¤ì£¼ **ì›” 08:00 KST**

<!-- PRD-10.3-3 -->

- ì‹¤í–‰: ë¡œì»¬ `npm run fetch:*` / ìš´ì˜ GitHub Actions or Supabase Scheduler

> - **ëŸ°íƒ€ì„**: GitHub Actions(UTC)
> - **ì‹œê°„ ë§¤í•‘**:
>   - Daily 06:00 **KST** = **ì „ë‚  21:00 UTC**
>   - Weekly ì›” 08:00 **KST** = **ì¼ 23:00 UTC**
> - **í™˜ê²½ ë³€ìˆ˜**: `SUPABASE_URL`, `SUPABASE_SERVICE_KEY`, `TZ=Asia/Seoul` (ë ˆí¬ secrets)
> - **ì‹¤í–‰ ë‹¨ìœ„**: `fetch:daily`, `fetch:weekly` **ë³„ë„ ìŠ¤í…**ìœ¼ë¡œ ë¶„ë¦¬

### 4) ë³´ì¡´ ì •ì±…

<!-- PRD-10.4-1 -->

- **MVP**: ë¬´ì œí•œ ì €ì¥

<!-- PRD-10.4-2 -->

- (ì˜µì…˜) Daily 30ì¼ / Weekly 26ì£¼ (SQLì€ PRD-17 ì°¸ê³ )

### 5) ë°ì´í„° í’ˆì§ˆ

<!-- PRD-10.5-1 -->

- ì¤‘ë³µ ì œê±°: `id` ë° `link` unique

<!-- PRD-10.5-2 -->

- íƒ€ì„ì¡´: `date`ëŠ” KST ë²„í‚·, `published_at`ì€ UTC

<!-- PRD-10.5-3 -->

- ì¸ë„¤ì¼ null-safe, ìš”ì•½ ê¸¸ì´ ì œí•œ, ì¹´í…Œê³ ë¦¬ ê·œì¹™ ì¤€ìˆ˜

### 6) í™•ì¥ì„±(ì–´ëŒ‘í„°)

<!-- PRD-10.6-1 -->

- `SourceAdapter.fetch(): Promise<Article[]>` ì¸í„°í˜ì´ìŠ¤

<!-- PRD-10.6-2 -->

- ì†ŒìŠ¤ ì¶”ê°€ ì‹œ ì–´ëŒ‘í„° íŒŒì¼ 1ê°œë§Œ ì¶”ê°€

> ### ìš”ì•½ ì •ì±…(MVP)
>
> - **ë°©ì‹**: ê·œì¹™ ê¸°ë°˜ **ì¶”ì¶œ ìš”ì•½**(ë¹„-LLM)
> - **ì…ë ¥ ìš°ì„ ìˆœìœ„**: `content:encoded` â†’ `description` â†’ ìŠ¤ë‹ˆí« â†’ ì œëª©
> - **ê°€ê³µ ê·œì¹™**: HTML ì œê±° â†’ ë¬¸ì¥ ë‹¨ìœ„ ë¶„í•  â†’ **2~3ë¬¸ì¥, ìµœëŒ€ 180ì**
> - **ê¸¸ì´ ì´ˆê³¼**: ë‹¨ì–´ ê²½ê³„ ê¸°ì¤€ìœ¼ë¡œ ìë¥´ê³  ë§ì¤„ì„í‘œ `â€¦`
> - **ë¶€ì¡±/ê²°ì¸¡**: ìš”ì•½ ë¶ˆê°€ ì‹œ `summary = null` ì €ì¥, UIì— **â€œìš”ì•½ ì—†ìŒâ€ ë°°ì§€**
> - **í’ˆì§ˆ í™•ì¥(í›„ìˆœìœ„)**: TextRank/LLMì€ *ì‹¤íŒ¨ ì‹œ í´ë°±*ìœ¼ë¡œë§Œ ê³ ë ¤

---

<!-- PRD-11 -->

## 11. í›„ìˆœìœ„(ì°¨í›„ í™•ì¥)

<!-- PRD-11-1 -->

- Supabase Auth(ë¡œê·¸ì¸) + ë¶ë§ˆí¬/ì¦ê²¨ì°¾ê¸°

<!-- PRD-11-2 -->

- ê°œì¸í™” ì¶”ì²œ(ì‚¬ìš©ì í‚¤ì›Œë“œ/ì¹´í…Œê³ ë¦¬)

<!-- PRD-11-3 -->

- ìš”ì•½ í’ˆì§ˆ ê°œì„ (LLM API)

<!-- PRD-11-4 -->

- ë‹¤êµ­ì–´/í•´ì™¸ ì†ŒìŠ¤ í™•ëŒ€

---

<!-- PRD-12 -->

## 12. ìˆ˜ìš© ê¸°ì¤€ (Acceptance Criteria)

<!-- PRD-12-1 -->

- Daily ì‚¬ì´ë“œë°”ëŠ” ìµœê·¼ 14ê°œì˜ **ì„œë¡œ ë‹¤ë¥¸** `date`ë¥¼ ë‚´ë¦¼ì°¨ìˆœ ë…¸ì¶œí•œë‹¤.

<!-- PRD-12-2 -->

- ë‚ ì§œ ì„ íƒ ì‹œ ê¸°ì‚¬ **10ê°œ**ê°€ ìµœì‹ ìˆœìœ¼ë¡œ í‘œì‹œëœë‹¤. `Load More` í´ë¦­ ì‹œ 10ê°œ ì¶”ê°€, 10ê°œ ë¯¸ë§Œì´ë©´ â€œNo more resultsâ€.

<!-- PRD-12-3 -->

- Weeklyë„ ë™ì¼ ê·œì¹™(ì£¼ì°¨ ëª©ë¡/10ê°œ í˜ì´ì§€ë„¤ì´ì…˜)ìœ¼ë¡œ ë™ì‘í•œë‹¤.

<!-- PRD-12-4 -->

- ê²€ìƒ‰ì€ Daily(ìµœê·¼ 14ì¼)+Weekly(ì „ì²´)ë¥¼ ë™ì‹œì— ìˆ˜í–‰í•˜ê³ , ê²°ê³¼ë¥¼ **ê´€ë ¨ë„ â†’ ìµœì‹ ìˆœ**ìœ¼ë¡œ ì •ë ¬í•´ ì„¹ì…˜ ë¶„ë¦¬ í‘œì‹œí•œë‹¤.

<!-- PRD-12-5 -->

- ì¹´ë“œì—ëŠ” **ì œëª©Â·ìš”ì•½Â·ì¶œì²˜Â·ì¼ì‹œÂ·ì¹´í…Œê³ ë¦¬**ê°€ í‘œì‹œë˜ê³ , ì œëª© í´ë¦­ì€ ìƒˆ íƒ­ìœ¼ë¡œ ì›ë¬¸ì„ ì—°ë‹¤.

---

<!-- PRD-13 -->

## 13. ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ (NFR)

<!-- PRD-13-1 -->

- ì„±ëŠ¥: ëª©ë¡ ì¿¼ë¦¬ **p95 < 500ms**, ì´ˆê¸° ì¹´ë“œ ë Œë” **FCP < 2.5s**(ë°ìŠ¤í¬íƒ‘)

<!-- PRD-13-2 -->

- ì ‘ê·¼ì„±: íƒ­/ë²„íŠ¼ì˜ ARIA íŒ¨í„´ ì¤€ìˆ˜

<!-- PRD-13-3 -->

- ì•ˆì •ì„±: ì†ŒìŠ¤ ì¼ë¶€ ì‹¤íŒ¨í•´ë„ ë‚˜ë¨¸ì§€ëŠ” ì„œë¹„ìŠ¤ ì§€ì†(ë¶€ë¶„ ì‹¤íŒ¨ í† ìŠ¤íŠ¸)

<!-- PRD-13-4 -->

- SEO/ê³µìœ : ê¸°ë³¸ `<title>`/OG ë©”íƒ€(SSR ë¯¸ë„ì… ê°€ì •)

---

<!-- PRD-14 -->

## 14. ì—ëŸ¬Â·ë¹ˆ ìƒíƒœ UI

<!-- PRD-14-1 -->

- ë¹ˆ ê²°ê³¼: â€œNo results foundâ€

<!-- PRD-14-2 -->

- ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: â€œNetwork error. Retryâ€

<!-- PRD-14-3 -->

- ì¸ë„¤ì¼ ì—†ìŒ: ì´ë¯¸ì§€ ì˜ì—­ ìˆ¨ê¸°ê³  ë³¸ë¬¸ ì˜ì—­ í™•ì¥

<!-- PRD-14-4 -->

- ìˆ˜ì§‘ ì‹¤íŒ¨: â€œì¼ì‹œì ìœ¼ë¡œ ë¡œë”©ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.â€

---

<!-- PRD-15 -->

## 15. ë°°í¬Â·í™˜ê²½ ë³€ìˆ˜ & ìŠ¤í¬ë¦½íŠ¸

<!-- PRD-15-1 -->

```
client/.env.local
  NEXT_PUBLIC_SUPABASE_URL=
  NEXT_PUBLIC_SUPABASE_ANON_KEY=

scripts/.env
  SUPABASE_URL=
  SUPABASE_SERVICE_KEY=
  TZ=Asia/Seoul
```

<!-- PRD-15-2 -->

```json
{
  "scripts": {
    "fetch:daily": "node scripts/fetchDaily.js",
    "fetch:weekly": "node scripts/fetchWeekly.js",
    "cron": "node scripts/cron.js"
  }
}
```

---

<!-- PRD-16 -->

## 16. ê²€ìƒ‰ SQL ë¶€ë¡ (ë·° + RPC + ì •ë ¬)

**í†µí•© ë·°**

<!-- PRD-16-1 -->

```sql
create or replace view unified_articles as
select
  'daily'::text as kind,
  date as date_key,
  null::text as week_key,
  published_at as sort_time,
  id, source, title, summary, link, category, tsv
from daily_articles
union all
select
  'weekly'::text as kind,
  null::date as date_key,
  week as week_key,
  coalesce(created_at, now()) as sort_time,
  id, source, title, summary, link, category, tsv
from weekly_articles;
```

**ê²€ìƒ‰ RPC (ê¸°ë³¸: Daily=14ì¼, ì„¹ì…˜ë³„ ìµœëŒ€ 50, ì •ë ¬=ê´€ë ¨ë„â†’ìµœì‹ )**

<!-- PRD-16-2 -->

> - **ë°˜í™˜ ì œì•½**: `search_unified(q, â€¦)`ëŠ” ê²°ê³¼ë¥¼ **kind(Daily/Weekly)ë³„**ë¡œ `rank desc, sort_time desc` ì •ë ¬ í›„, **ê° ì„¹ì…˜ ìµœëŒ€ `max_results`(ê¸°ë³¸ 50)** ê¹Œì§€ë§Œ ë°˜í™˜í•œë‹¤.
> - êµ¬í˜„ ê¶Œì¥: ìœˆë„ìš° í•¨ìˆ˜ `row_number() over(partition by kind â€¦)`ë¡œ ìƒí•œ ì ìš©.

```sql
create or replace function search_unified(
  q text,
  cat text default null,
  d_since interval default '14 days',
  max_results int default 50
) returns table(
  kind text, date_key date, week_key text, sort_time timestamptz,
  id text, source text, title text, summary text, link text, category text, rank float
) language sql as $$
  with qry as (select websearch_to_tsquery('simple', q) as tsq)
  select ua.kind, ua.date_key, ua.week_key, ua.sort_time,
         ua.id, ua.source, ua.title, ua.summary, ua.link, ua.category,
         ts_rank(ua.tsv, (select tsq from qry)) as rank
  from unified_articles ua
  where ua.tsv @@ (select tsq from qry)
    and (ua.kind <> 'daily' or ua.date_key >= current_date - d_since)
    and (cat is null or ua.category = cat)
  order by rank desc, ua.sort_time desc
  limit max_results
$$;
```

---

<!-- PRD-17 -->

## 17. ë³´ì¡´ ì •ì±… SQL (ì•ˆì „ ë²„ì „)

<!-- PRD-17-1 -->

```sql
-- Daily: 30ì¼ ì´ì „ ì‚­ì œ (ì˜µì…˜)
delete from daily_articles
where date < current_date - interval '30 days';

-- Weekly: 26ì£¼ ì´ì „ ì‚­ì œëŠ” created_at ê¸°ì¤€ ê¶Œì¥ (ì˜µì…˜)
delete from weekly_articles
where created_at < now() - interval '26 weeks';
```

---

<!-- PRD-18 -->

## 18. ë¡œê¹…/ë¶„ì„(ì„ íƒ)

<!-- PRD-18-1 -->

- ì´ë²¤íŠ¸: `select_date`, `select_week`, `search_submit`, `load_more`, `open_link`

<!-- PRD-18-2 -->

- ì†ì„±: ê²€ìƒ‰ì–´, ì¹´í…Œê³ ë¦¬, ë‚ ì§œ/ì£¼ì°¨, í˜ì´ì§€, ê²°ê³¼ ìˆ˜

<!-- PRD-18-3 -->

- í™œìš©: í˜ì´ì§€ ì‚¬ì´ì¦ˆ/ì •ë ¬/ì‚¬ì´ë“œë°” UX íŠœë‹ ê·¼ê±° í™•ë³´

---

<!-- PRD-19 -->

## 19. ë¦¬ìŠ¤í¬ & ëŒ€ì‘

<!-- PRD-19-1 -->

- RSS/DOM êµ¬ì¡° ë³€ê²½ â†’ ì–´ëŒ‘í„°Â·ì…€ë ‰í„° ëª¨ë“ˆí™”, ì‹¤íŒ¨ ì‹œ ì†ŒìŠ¤ë³„ ê²©ë¦¬ ë¡œê·¸

<!-- PRD-19-2 -->

- ê³¼ë„í•œ í˜¸ì¶œ/ë¹„ìš© â†’ í¬ë¡  ìˆ˜ì§‘ ê³ ì •, í”„ë¡ íŠ¸ ì¿¼ë¦¬ `limit/range` ê°•ì œ

<!-- PRD-19-3 -->

- ì €ì‘ê¶Œ/ì´ìš©ì•½ê´€ â†’ ì›ë¬¸ ë§í¬Â·ì¶œì²˜ ëª…ì‹œ, ê° ì‚¬ì´íŠ¸ `robots.txt` ì¤€ìˆ˜
- ì´ë¯¸ì§€/í…ìŠ¤íŠ¸ ì¬ì‚¬ìš© ì´ìŠˆ â†’ MVP ë‹¨ê³„ì—ì„œëŠ” ì›ë¬¸ ì¸ë„¤ì¼ ì œê±° ë˜ëŠ” ëŒ€ì²´ ì´ë¯¸ì§€ ì‚¬ìš©, ìƒì—…í™” ì‹œ ì–¸ë¡ ì‚¬ API/ë¼ì´ì„ ìŠ¤ ì²´ê²° ë˜ëŠ” AI ìƒì„± ì´ë¯¸ì§€Â·ìì²´ ì œì‘ ë¹„ì£¼ì–¼ ë„ì… ê²€í† 

<!-- PRD-19-4 -->

- GitHub Actionsì€ schedule ì‹¤í–‰ì„ best-effortë¡œ ì²˜ë¦¬í•´ì„œ ìµœëŒ€ 30ë¶„ ì§€ì—°ë  ìˆ˜ ìˆë‹¤.

---

<!-- PRD-20 -->

## 20. 2ì£¼ ì‹¤í–‰ ê³„íš

<!-- PRD-20-1 -->

- **W1**
  - í”„ë¡œì íŠ¸ í‚¥ì˜¤í”„ & ê¸°ë³¸ ì„¸íŒ…
    (ë ˆí¬ ì´ˆê¸°í™”, ë¸Œëœì¹˜ ì „ëµ/ë¦°í„°/í¬ë§¤í„°, í™˜ê²½ ë³€ìˆ˜ ìŠ¤í™ ì •ë¦¬)
  - **UI ë¼ˆëŒ€ êµ¬í˜„ (Mock ë°ì´í„° ê¸°ë°˜)**
    - ë ˆì´ì•„ì›ƒ: í—¤ë”, íƒ­, ì‚¬ì´ë“œë°”, ì¹´ë“œ ê·¸ë¦¬ë“œ
    - Daily/Weekly íƒ­ í™”ë©´, ê²€ìƒ‰ ê²°ê³¼ í™”ë©´, ë¡œë”©/ë¹ˆ ìƒíƒœ/ì—ëŸ¬ ë©”ì‹œì§€
    - ì ‘ê·¼ì„± íŒ¨í„´(ARIA, í¬ì»¤ìŠ¤ ì´ë™) ì ìš©

  - DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì •ì±… í™•ì • (001~005 ìˆœì„œ ë¬¸ì„œí™”, ì‹¤í–‰ì€ W2ì—ì„œ ì§„í–‰)

<!-- PRD-20-2 -->

- **W2**
  - **DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰** (í…Œì´ë¸”, ì¸ë±ìŠ¤, íŠ¸ë¦¬ê±°, ë·°, RPC)
  - ë°ì´í„° ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸ ì„¤ê³„ & ìƒ˜í”Œ ì ì¬
    - Daily: í•œêµ­ê²½ì œ + DataNet RSS â†’ Supabase ì ì¬ (ìš”ì•½=ê·œì¹™ ê¸°ë°˜ ì¶”ì¶œ, SHA1(link) ì¤‘ë³µ ë°©ì§€)
    - Weekly: scienceON ìŠ¤í¬ë˜í•‘ ëª©ì—…/ì¸í„°í˜ì´ìŠ¤ ê²€ì¦

  - **UI â†” DB ì—°ë™**
    - Daily/Weekly íƒ­ ì‹¤ì œ ë°ì´í„° ë°”ì¸ë”©
    - ê²€ìƒ‰ RPC ì—°ë™ (ê´€ë ¨ë„ â†’ ìµœì‹  ì •ë ¬, ì„¹ì…˜ë³„ ìƒí•œ ë³´ì¥)

  - ìë™í™” ë° ë°°í¬ ì¤€ë¹„
    - GitHub Actions(UTC ë³€í™˜) ë˜ëŠ” Supabase Scheduler ì„ íƒ
    - ì‹¤í–‰ ë¡œê·¸/ì—ëŸ¬ ì•Œë¦¼ ì±„ë„ ì§€ì •
    - ìš´ì˜ FAQëŠ” `docs/phase7_qna.md` ì°¸ê³  (ê²€ìƒ‰/ë°°ì¹˜/ì„œë²„ ì˜¨ë””ë§¨ë“œ/ë°ì´í„° ë³´ì¡´)

  - QA & ì„±ëŠ¥ ì ê²€, README/ìš´ì˜ ê°€ì´ë“œ ì—…ë°ì´íŠ¸

---

## 21. Tech Stack

- **Frontend**: Next.js (React ê¸°ë°˜, Vercel ë°°í¬ ê°€ì •)
- **Backend API & Batch**: Node.js + Express
  - êµ¬ì¡°: **Controller â†’ Service â†’ Repository** (ì¿¼ë¦¬/SQL ë¶„ë¦¬)
  - ë¬¸ì„œí™”: **OpenAPI** ìŠ¤í™(`/docs/openapi.yaml`) + **Swagger UI**
  - ë³´ì•ˆ/ì•ˆì •ì„±: **helmet, cors, compression, express-rate-limit**
  - ë¡œê¹…: **pino-http**(ìš”ì²­ ID) / ì—ëŸ¬ í•¸ë“¤ëŸ¬
  - **ì„ ì • ì´ìœ **: ExpressëŠ” ìƒíƒœê³„ê°€ ë„“ê³  í•™ìŠµê³¡ì„ ì´ ë‚®ì•„, ë¹ ë¥¸ MVP ê°œë°œê³¼ í¬íŠ¸í´ë¦¬ì˜¤ í”„ë¡œì íŠ¸ì—ì„œ ë°±ì—”ë“œ ì—­ëŸ‰ì„ ë“œëŸ¬ë‚´ê¸°ì— ì í•©í•˜ë‹¤.

- **Database**: PostgreSQL (Supabase ì¸ìŠ¤í„´ìŠ¤)
- **Language**: JavaScript (ì°¨í›„ TypeScript í™•ì¥ ê³ ë ¤)
- **Scheduler**: GitHub Actions(ê¶Œì¥, UTCâ†”KST ë§¤í•‘) ë˜ëŠ” Supabase Scheduler (íƒ1)

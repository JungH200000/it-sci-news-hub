# 2025-09-28 작업 로그

## 목표

- Daily ingest 파이프라인에 DataNet RSS를 포함 자동화
- GitHub Actions, 문서, 환경 변수 등을 최신 상태로 동기화
- 배포 환경(Vercel 프론트, Railway API)에서 발생한 CORS/연결 이슈 해결

## 수행 내용

- `services/ingest/datanet_scraper.py` 작성 및 한국경제 RSS와 동일한 요약/필터 로직으로 정규화.
- `services/ingest/run_ingest.py`의 Daily ingest를 여러 스크레이퍼(한국경제 + DataNet) 순차 실행 → ID 중복 제거 → Supabase upsert 하도록 확장. Weekly ingest는 `week,link` 충돌 시 덮어쓰도록 `on_conflict` 파라미터 추가.
- GitHub Actions `ingest-daily.yml` 스텝 설명을 한국경제+DataNet 통합 실행으로 갱신.
- 문서 업데이트: `services/ingest/README.md`, `docs/PRD.md`, `docs/init-plan.md`, `docs/env.md`에 DataNet 소스, run_ingest 플로우, `ALLOWED_ORIGINS` 환경 변수, 배포 안내 등을 반영.
- API CORS 로직(`services/api/src/app.js`)을 allowlist/환경 변수 기반으로 재구성해 Vercel 도메인 및 로컬 개발을 허용하도록 수정.
- Vercel ↔ Railway 배포 테스트 중, Origin 슬래시 및 `/api` 경로 누락으로 인한 404/500 이슈 확인 후 수정 안내. 500은 Railway 환경에서 `DATABASE_URL` 미설정 시 발생한다는 점 공유.
